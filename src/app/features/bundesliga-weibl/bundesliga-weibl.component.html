<section class="tournaments-shell">
  <section class="tournaments-hero block">
    <div class="tournament-hero__head">
      <img src="assets/images/logos/WB.png" alt="Wasserball weiblich Logo" loading="lazy" />
      <div>
        <p class="hero-kicker">Wasserball weibl.</p>
        <h1>Bundesliga 25/26</h1>
        <p class="hero-subtitle">Spiele und Ergebnisse</p>
      </div>
    </div>
  </section>

  <section class="tournaments-dashboard block" aria-label="Nächstes Spiel">
    <div class="dash-grid single-card-grid">
      <section class="dash-card match-center" aria-label="Nächstes Spiel">
        <p class="section-kicker">Nächstes Spiel</p>
        <h2>Spiel {{ nextMatch.matchNo }}</h2>

        <div class="match-center__top">
          <div>
            <p class="match-center__date">{{ nextMatch.date }}</p>
            <p class="match-center__time">{{ nextMatch.time }}</p>
          </div>
        </div>

        <p class="match-center__teams">{{ nextMatch.home }} <span>vs.</span> {{ nextMatch.away }}</p>
        <p class="match-center__location">{{ nextMatch.venue }}</p>
        <p class="match-center__countdown-label">Countdown</p>
        <p class="match-center__countdown">{{ countdownText }}</p>
      </section>
    </div>
  </section>

  <section class="tournaments-ranking block" aria-labelledby="ranking-title">
    <p class="section-kicker">Aktuelle Tabelle</p>
    <h2 id="ranking-title">{{ rankingTitle }}</h2>

    <div class="ranking-table-wrap">
      <table class="ranking-table" aria-label="Aktuelle Tabelle Bundesliga weiblich">
        <thead>
          <tr>
            <th scope="col">Platz</th>
            <th scope="col">Verein</th>
            <th scope="col">Spiele</th>
            <th scope="col">S*</th>
            <th scope="col">U*</th>
            <th scope="col">N*</th>
            <th scope="col">Tore</th>
            <th scope="col">TD*</th>
            <th scope="col">Punkte</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of rankingRows; let index = index" [class.ranking-row--leader]="index === 0">
            <td>{{ index + 1 }}</td>
            <td>{{ row.team }}</td>
            <td>{{ row.played }}</td>
            <td>{{ row.wins }}</td>
            <td>{{ row.draws }}</td>
            <td>{{ row.losses }}</td>
            <td>{{ row.goals }}</td>
            <td>{{ row.goalDiff }}</td>
            <td>{{ row.points }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <p class="ranking-legend">S = Siege, U = Unentschieden, N = Niederlagen, TD = Tordifferenz</p>
    <p class="ranking-legend">Für die Tabelle, Tore und Tordifferenz ist das Ergebnis nach dem 4. Abschnitt maßgeblich.</p>
    <p class="ranking-legend">Für die Statistik Sieg/Niederlage wird das Ergebnis nach dem Entscheidungswerfen herangezogen.</p>
  </section>

  <section class="tournaments-dashboard block" aria-label="Letztes Spiel">
    <div class="dash-grid single-card-grid">
      <div class="match-divider" aria-hidden="true"></div>
      <section class="dash-card match-center" aria-label="Letztes Spiel">
        <p class="section-kicker">Letztes Spiel</p>
        <h2>Spiel {{ lastMatch.matchNo }}</h2>

        <div class="match-center__top">
          <div>
            <p class="match-center__date">{{ lastMatch.date }}</p>
            <p class="match-center__time">{{ lastMatch.time }}</p>
          </div>
          <span class="status-badge status-badge--finished">Final</span>
        </div>

        <p class="match-center__teams">{{ lastMatch.home }} <span>vs.</span> {{ lastMatch.away }}</p>
        <p class="match-center__location">{{ lastMatch.venue }}</p>
        <p class="match-center__countdown-label">Endstand:</p>
        <p class="match-center__score">{{ lastMatch.score }}</p>
        <p class="match-center__periods">{{ lastMatch.periods }}</p>
      </section>
    </div>
  </section>

  <section class="livestream block" aria-labelledby="livestream-title">
    <p class="section-kicker">Streaming</p>
    <h2 id="livestream-title">Spielvideo</h2>
    <p>Aufzeichnung / Livestream</p>

    <div class="livestream__frame" *ngIf="isBrowser">
      <iframe
        [src]="livestreamEmbedUrl"
        title="Bundesliga weiblich Spielvideo"
        loading="lazy"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        allowfullscreen
      ></iframe>
    </div>

    <a class="livestream__button" [href]="livestreamUrl" target="_blank" rel="noopener">
      Video auf YouTube öffnen
    </a>
  </section>

</section>
